!function(t){function n(i){if(o[i])return o[i].exports;var a=o[i]={exports:{},id:i,loaded:!1};return t[i].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}var o={};return n.m=t,n.c=o,n.p="",n(0)}([function(t,n){"use strict";L.Control.Info=L.Control.extend({options:{addToMenu:!0,autoActivate:!0,dontShowAgainBox:!0,dateLastUpdated:"2016-03-31",daysExpired:90,position:"topright",_lang:{sv:{titleInfo:"<h4>Välkommen till smap-responsive!</h4>",bodyContent:"<p>Jag är dialogen kropp.</p>",tooltipText:"Visa info"},en:{titleInfo:"<h4>Welcome to smap-responsive!</h4>",bodyContent:"<p>I am the body of the dialog.</p>",tooltipText:"Show info"}}},_lang:{sv:{close:"Stäng",tooltipText:"Visa info",dontShowAgain:"Visa inte från start nästa gång"},en:{close:"Close",tooltipText:"Show info",dontShowAgain:"Don't show from start next time"}},_setLang:function(t){t=t||smap.config.langCode||navigator.language.split("-")[0]||"en",this._lang&&(this.lang=this._lang?this._lang[t]:null)},initialize:function(t){L.setOptions(this,t),this.options._lang&&$.extend(!0,this._lang,this.options._lang),this.options.dateLastUpdated&&(-1===this.options.dateLastUpdated.search("T")&&(this.options.dateLastUpdated+="T00:00:00.000Z"),this._updateExpirationStatus()),this._setLang(t.langCode)},onAdd:function(t){return this.map=t,this._container=L.DomUtil.create("div","leaflet-control-info"),L.DomEvent.disableClickPropagation(this._container),this.$container=$(this._container),this._drawBtn(),this._container},onRemove:function(t){},_getLocalStorage:function(){return window.localStorage?window.localStorage:!1},_updateExpirationStatus:function(){var t=this._getLocalStorage();if(!t||!t.dontShowAgain)return!1;var n=new Date(t.dontShowAgain),o=new Date(this.options.dateLastUpdated),i=new Date,a=o>n,e=this.options.daysExpired;if(!a&&"number"==typeof e){var s=(i-n)/1e3/3600/24;a=s>=e}a&&delete t.dontShowAgain},activate:function(t){t=t||!1;var n=(this.options,this._getLocalStorage());if(!t&&n&&n.dontShowAgain)return!1;if(!this._$dialog){var o=$('<div class="smap-info-footer"><button type="button" class="btn btn-default" data-dismiss="modal">'+this.lang.close+"</button></div>"),i=this._drawBody(this.lang.bodyContent);o.prepend(this._createCheckbox()),this._$dialog=utils.drawDialog(this.lang.titleInfo,i,o)}this._$dialog.modal("show")},_drawBody:function(t){var n=$("<div />");return n.append(t),n},_createCheckbox:function(){var t=this.options.autoActivate&&this.options.dontShowAgainBox,n=this._getLocalStorage();if(!n)return null;if(t===!0){var o=n.dontShowAgain?!0:!1,i=$('<div class="checkbox">					<label>						<input type="checkbox"> '+this.lang.dontShowAgain+" 					</label>				</div>");i.find("input").on("change",function(){var t=$(this).is(":checked");t?n.dontShowAgain=(new Date).toISOString():delete n.dontShowAgain}).prop("checked",o)}return i},_drawBtn:function(){var t=this;if(this.options.addToMenu){var n=$('<button id="smap-info-btn" title="'+this.lang.tooltipText+'" class="btn btn-default"><span class="fa fa-info"></span></button>');n.on("touchstart click",function(){return t.activate(!0),!1}),this.$container.append(n)}}}),L.control.info=function(t){return new L.Control.Info(t)}}]);
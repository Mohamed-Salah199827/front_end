!function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){"use strict";L.Control.FullScreen=L.Control.extend({options:{position:"topright",url_root:location.origin+location.pathname+"?",fs_button:function(){var e=location.search;return e.substring(e.indexOf("fs")+3)}(),controlToAdd:!1,mode:"full"},_properties:function(){var e=this,t=this.lang;switch(this.options.mode){case"replace":return{expand:"fa fa-expand",compress:"fa fa-compress",expTitle:t.viewLarge,compTitle:t.back,action:function(){window.parent.location.href=smap.cmd.createParams(e.options.url_root)+"&fs=back"}};case"newTab":return{expand:"fa fa-external-link",compress:"fa fa-times",expTitle:t.newTab,compTitle:t.close,action:function(){window.open(smap.cmd.createParams(e.options.url_root)+"&fs=close")}};case"full":return{expand:"fa fa-expand",compress:"fa fa-compress",expTitle:t.fullExp,compTitle:t.reset,action:function(){if(screenfull.enabled&&(screenfull.toggle(),navigator.userAgent.indexOf("Trident/7.")>-1)){var e=$("body")[0];e.style.width=screen.width+"px",e.style.height=screen.height+"px"}}}}},_lang:{sv:{viewLarge:"Visa större karta",newTab:"Öppna kartan i ny flik",fullExp:"Visa kartan i fullskärm",reset:"Återställ",back:"Tillbaka",close:"Stäng kartan",notAllowed:"Helskärmsläge stöds eller tillåts inte av din webläsare. Funktionen kommer inte vara tillgänglig"},en:{viewLarge:"Show larger map",newTab:"Open map in new tab",fullExp:"Show in fullscreen",reset:"Reset",back:"Go back",close:"Close the map",notAllowed:"Fullscreen mode not supported/allowed by your browser. Feature will not be available."}},_setLang:function(e){e=e||smap.config.langCode,this._lang&&(this.lang=this._lang?this._lang[e]:null)},initialize:function(e){L.setOptions(this,e),this.options._lang&&$.extend(!0,this._lang,this.options._lang),this._setLang(e.langCode),("close"===this.options.fs_button||"back"===this.options.fs_button)&&smap.core.pluginHandlerInst.addPlugins([this.options.controlToAdd])},onAdd:function(e){this.map=e;var t=this;return this._container=L.DomUtil.create("div","leaflet-control-fullScreen"),L.DomEvent.disableClickPropagation(this._container),this.$container=$(this._container),"full"===this.options.mode?this._enableIframeFullscreen()&&screenfull.enabled?(this._createBtn(),document.addEventListener(screenfull.raw.fullscreenchange,function(){t._updateButton()})):console.log(t.lang.notAllowed):this._createBtn(),this._container},activate:function(){this._properties().action()},_enableIframeFullscreen:function(){if(self===top)return!0;try{var e=window.parent.document.getElementsByTagName("iframe")[0];return e.setAttribute("allowfullscreen",""),!0}catch(t){return console.log(t.message),!1}},_updateButton:function(){var e=$("#smap-fullscreen-btn"),t=this._properties();screenfull.isFullscreen?(e.find("span").removeClass(t.expand).addClass(t.compress),e.attr("data-original-title",t.compTitle)):(e.find("span").removeClass(t.compress).addClass(t.expand),e.attr("data-original-title",t.expTitle)),e.blur()},onRemove:function(e){},_createBtn:function(){var e=this,t={title:e._properties().expTitle,icon:e._properties().expand,action:e._properties().action};"back"===e.options.fs_button?t={title:e._properties().compTitle,icon:e._properties().compress,action:function(){history.back()}}:"close"===e.options.fs_button&&(t={title:e._properties().compTitle,icon:e._properties().compress,action:function(){window.close()}}),this.$btn=$('<button id="smap-fullscreen-btn" title="'+t.title+'" class="btn btn-default"><span class="'+t.icon+'"></span></button>'),this.$btn.on("click",function(){return t.action(),this.blur(),!1}),this.$container.append(this.$btn)}}),L.control.fullScreen=function(e){return new L.Control.FullScreen(e)}}]);
!function(t){function i(s){if(o[s])return o[s].exports;var e=o[s]={exports:{},id:s,loaded:!1};return t[s].call(e.exports,e,e.exports,i),e.loaded=!0,e.exports}var o={};return i.m=t,i.c=o,i.p="",i(0)}([function(t,i){"use strict";L.Control.RedirectClick=L.Control.extend({options:{position:"topright",url:"http://kartor.malmo.se/urbex/index.htm?p=true&xy=${x};${y}",btnClass:"fa fa-plane",cursor:"crosshair",destProj:"EPSG:4326",reverseAxisDest:!1,srcProj:"EPSG:4326",reverseAxisSrc:!1},_lang:{en:{name:"Click map -> redirect",hoverText:"Click the map"},sv:{name:"Klicka i kartan -> l√§nkas vidare",hoverText:"Klicka i kartan"}},_setLang:function(t){t=t||smap.config.langCode||navigator.language.split("-")[0]||"en",this._lang&&(this.lang=this._lang?this._lang[t]:null)},initialize:function(t){L.setOptions(this,t),this.options._lang&&$.extend(!0,this._lang,this.options._lang),this._setLang(t.langCode)},_setURL:function(t){var i=this;i.options.url=t?t||i.options.url:null},onAdd:function(t){return this.map=t,this._container=L.DomUtil.create("div","leaflet-control-RedirectClick"),L.DomEvent.disableClickPropagation(this._container),this.$container=$(this._container),this._createButton(),this._container},addHooks:function(){this.map.on("click",this.onMapClick,this),utils.isTouchOnly()?(this.staticTooltip=$('<div class="rclick-static-tooltip">'+this.lang.hoverText+"</div>"),$("#mapdiv").append(this.staticTooltip)):(this._tooltip={},this._tooltip.text=this.lang.hoverText,this.tooltip=new L.Tooltip(this.map).updateContent(this._tooltip),this.map.on("mousemove mouseup",this._onMouseMove,this))},removeHooks:function(){this.map.off("click",this.onMapClick,this),this.tooltip&&(this.map.off("mousemove mouseup",this._onMouseMove,this),this.tooltip.dispose())},_projectEPSG:function(t){var i=new Proj4js.Proj("EPSG:4326"),o=new Proj4js.Proj("EPSG:3008"),s=(L.Proj,new Proj4js.Point(t.latlng.lng,t.latlng.lat));return Proj4js.transform(i,o,s),t.latlng.lat=s.x,t.latlng.lng=s.y,t},_onMouseMove:function(t){this.tooltip.updatePosition(t.latlng)},onMapClick:function(t){this.onDone(t),this._deactivate()},_createButton:function(){var t=this,i=$('<button title="'+this.lang.name+'" class="btn btn-default"><span class="'+this.options.btnClass+'"></span></button>');i.on("click touchstart",function(){return t.active&&t.active!==!1?(t._deactivate(),$("#mapdiv").focus(),t.active=!1):(t._deactivate(),t._activate(),t.active=!0),!1}),this.$btn=i,t.$container.append(i)},_selection:function(t){var i,o,s=[smap.cmd.getControl("L.Control.SelectWMS"),smap.cmd.getControl("L.Control.SelectVector")];for(o=0;o<s.length;o++)i=s[o],i&&(t===!0?i.activate():i.deactivate())},_activate:function(){return this.active?!1:(this._deactivateAll(),this.$btn.addClass("active"),this.$btn.blur(),void(this.options.url?(this.removeHooks(),this.addHooks(),$("#mapdiv").css({cursor:this.options.cursor}),this._selection(!1)):(this._deactivate(),$("#mapdiv").focus(),utils.log("RedirectClick error: Redirect URL missing. Check config-file."))))},_deactivate:function(){this.active=!1,this.$btn.removeClass("active"),this.removeHooks(),this.staticTooltip&&this.staticTooltip.remove(),$("#mapdiv").css({cursor:""}),this._selection(!0)},_deactivateAll:function(){for(var t=smap.cmd.getControls("RedirectClick"),i=0;i<t.length;i++)t[i]._deactivate()},onRemove:function(t){this.$container.empty(),this.staticTooltip&&this.staticTooltip.remove()},onDone:function(t){var i=this,o=i.options.url,s=t.latlng;this.options.destProj&&this.options.destProj!==this.options.srcProj&&(s=utils.projectLatLng(s,this.options.srcProj,this.options.destProj,this.options.reverseAxisSrc||!1,this.options.reverseAxisDest||!1)),this.staticTooltip&&this.staticTooltip.remove(),o=o.replace(/\${x}/g,utils.round(s.lng,5)).replace(/\${y}/g,utils.round(s.lat,5)),window.open(o,this.lang.name)}}),L.control.redirectclick=function(t){return new L.Control.RedirectClick(t)}}]);
!function(t){function n(i){if(o[i])return o[i].exports;var a=o[i]={exports:{},id:i,loaded:!1};return t[i].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}var o={};return n.m=t,n.c=o,n.p="",n(0)}([function(t,n){"use strict";L.Control.ShareLink=L.Control.extend({options:{position:"bottomright",addToMenu:!1,maxLen:2083,root:null},_lang:{sv:{caption:"Länk till kartan",close:"Stäng",tooLong:"För lång länk",tooLongUrl:"Notera! Länken är för lång för att fungera i en del äldre webbläsare. Ta bort ett eller flera ritade objekt för att göra länken kortare."},en:{caption:"Share link",close:"Close",tooLong:"Too long link",tooLongUrl:"Note! The link may not work in some older browsers. Please remove one or more drawn features to make it shorter."}},_setLang:function(t){t=t||smap.config.langCode,this._lang&&(this.lang=this._lang?this._lang[t]:null)},initialize:function(t){L.setOptions(this,t),this._setLang(t.langCode)},onAdd:function(t){return this.map=t,this._container=L.DomUtil.create("div","leaflet-control-ShareLink"),L.DomEvent.disableClickPropagation(this._container),this.$container=$(this._container),this._createBtn(),this._container},activate:function(){var t=this,n=this,o=smap.cmd.createParams(this.options.root||!0),i=$('<div class="form-group"><input type="text" class="form-control" placeholder="'+this.lang.caption+'"></div>'),a=i.find("input");a.val(o);var e=function(t){t.setSelectionRange?t.setSelectionRange(0,9999):$(t).select()};if(!this._$dialog){var l='<button type="button" class="btn btn-default" data-dismiss="modal">'+this.lang.close+"</button>";this._$dialog=utils.drawDialog(this.lang.caption,i,l),this._$dialog.attr("id","slink-modal"),a.on("tap click",function(){e(this)}),this._$dialog.on("shown.bs.modal",function(){e(a[0])}),this._$dialog.on("hide.bs.modal",function(){$(this).find("input[type=text]").blur()}),this._$dialog.on("hidden.bs.modal",function(){n._$dialog.empty().remove(),n._$dialog=null})}if(o.length>this.options.maxLen){var s,r;!function(){var n=function o(){s.find("input[type=text]").prop("disabled",!0),s.off("shown.bs.modal",o)};s=t._$dialog,r=smap.cmd.notify(t.lang.tooLongUrl,"warning",{parent:i.parent()}),r.removeClass("map-alert"),s.find("input[type=text]").val(t.lang.tooLong),s.on("shown.bs.modal",n)}()}this._$dialog.modal("show")},_createBtn:function(){var t=this,n=$('<button id="smap-sharelink-btn" title="'+this.lang.caption+'" class="btn btn-default"><span class="fa fa-link"></span></button>');n.on("click touchstart",function(){return t.activate(),!1}),this.$container.append(n)},onRemove:function(t){}}),L.control.sharePos=function(t){return new L.Control.SharePos(t)}}]);
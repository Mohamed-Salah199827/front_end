!function(e){function t(a){if(i[a])return i[a].exports;var r=i[a]={exports:{},id:a,loaded:!1};return e[a].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t){"use strict";L.Control.SelectVector=L.Control.extend({options:{position:"bottomright",selectStyle:{weight:5,color:"#00FFFF",fillColor:"#00FFFF",opacity:1,fillOpacity:.5}},_lang:{sv:{exampleLabel:"Ett exempel"},en:{exampleLabel:"An example"}},_selectedFeatures:[],_setLang:function(e){e=e||smap.config.langCode,this._lang&&(this.lang=this._lang?this._lang[e]:null)},initialize:function(e){L.setOptions(this,e),this._setLang(e.langCode);var t=this;this._onFeatureClick=function(e){var i=200;t._clickWasRegistered||(t.onFeatureClick(e),console.log("click"),t._clickWasRegistered=!0,setTimeout(function(){t._clickWasRegistered=!1},i))}},activate:function(){this._active=!0},deactivate:function(){this._active=!1},onAdd:function(e){return this.map=e,this._container=L.DomUtil.create("div","leaflet-control-selectvector"),L.DomEvent.disableClickPropagation(this._container),this.$container=$(this._container),this.$container.css("display","none"),this._bindEvents(),this.activate(),this._container},onRemove:function(e){this.map.off("layeradd",this._onLayerAdded),this.map.off("click",this._onMapClick),this.deactivate()},_bindEvents:function(){this._onLayerAdded=$.proxy(this.onLayerAdded,this),this._onLayerRemoved=$.proxy(this.onLayerRemoved,this),this._onMapClick=$.proxy(this.onMapClick,this),this.map.on("layeradd",this._onLayerAdded),this.map.on("layerremove",this._onLayerRemoved),this.map.on("click",this._onMapClick)},onMapClick:function(){this._selectedFeatures=[]},_vectorLayers:[],onLayerAdded:function(e){var t=this,i=e.layer,a=i.hasOwnProperty("_layers");a&&i.on&&(i.on("load",function(){var e=function(e){e.options=e.options||{},e.options.layerId=i.options.layerId,e.off("click",t._onFeatureClick),e.on("click",t._onFeatureClick)};this.eachLayer&&this.eachLayer(e),this.off("dblclick",t._onFeatureClick).on("dblclick",t._onFeatureClick)}),this._vectorLayers.push(i))},onLayerRemoved:function(e){if(e.layer.options&&e.layer.options.layerId){var t=e.layer.options.layerId;if(t&&e.layer._layers){var i=$.inArray(e.layer,this._vectorLayers);i>-1&&this._vectorLayers.splice(i,1)}}},_layerFromFeature:function(e,t){var i,a,r=t._layers;for(var s in r){var n=r[s];if(n.feature&&(i=n.feature.id||n.feature.ID,a=e.id||e.ID,i===a))return n}return null},unselect:function(e){var t=e.layerId,i=smap.cmd.getLayer(t),a=$.inArray(e,this._selectedFeatures);this._selectedFeatures.splice(a,1);var r=utils.getLayerFromFeature(e,i)||i;i.resetStyle.call(i,r),this._map.fire("unselected",{feature:e})},onFeatureClick:function(e){if(!this._active)return!1;var t=e.layer&&e.layer.feature?e.layer.feature:e.target.feature||e.target,i=e.originalEvent?e.originalEvent.shiftKey||!1:!1,a=e.target,r=a.options.layerId||e.layer.options.layerId,s=smap.core.layerInst._getLayer(r);if(i===!1&&(this._selectedFeatures=[],s&&s.resetStyle)){var n=s.resetStyle;s.eachLayer(function(e){n.call(s,e)});for(var o=this._vectorLayers,l=0,c=o.length;c>l;l++)h=o[l],h.resetStyle&&h!==s&&(h._layers?h.eachLayer(function(e){h.resetStyle(e)}):h.resetStyle(h))}var y=$.inArray(t,this._selectedFeatures);if(i===!0&&y>-1){this._selectedFeatures.splice(y,1),this._map.fire("unselected",{feature:t});var h=this._layerFromFeature(t,s);s.resetStyle.call(s,h)}else{if(t.layerId=r,t.uniqueKey=s&&s.options?s.options.uniqueKey:t.layerId,this._selectedFeatures.push(t),console.log("selected features: "+this._selectedFeatures.length),s){var u=this._layerFromFeature(t,s);u&&u.setStyle&&u.setStyle(s.options.selectStyle||this.options.selectStyle)}this._map.fire("selected",{feature:t,selectedFeatures:this._selectedFeatures,layer:s||t,latLng:e.latlng,shiftKeyWasPressed:e.originalEvent?e.originalEvent.shiftKey||!1:!1})}}}),L.control.selectVector=function(e){return new L.Control.SelectVector(e)}}]);
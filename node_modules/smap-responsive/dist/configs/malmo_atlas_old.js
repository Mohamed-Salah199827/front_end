var ws = {
		"localhost": {
			proxy: "http://localhost/cgi-bin/proxy.py?url="
		},
		"161.52.15.157": {
			proxy: "http://localhost/cgi-bin/proxy.py?url="
		},
		"mobile.smap.se": {
			proxy: "http://mobile.smap.se/smap-mobile/ws/proxy.py?url="
		},
		"kartor.helsingborg.se": {
			proxy: "http://kartor.helsingborg.se/cgi-bin/proxy.py?url="
		}
};

var config = {

		params:{
			center: [13.0, 55.58],
			zoom: 11
		},

		mapConfig: {
			maxZoom: 21
		},

		ws: ws,
				
		ol: [
			// {
			// 		init: "L.GeoJSON.WFS",
			// 		url: "http://localhost/geoserver/wfs",
			// 		options: {
			// 			params: {
			// 				typeName: "malmows:SMA_FASTYTA_3D_P"
			// 			},
			// 			displayName: "Stadsdel2",
			// 			layerId: "stadsdel2",
			// 			xhrType: "POST",
			// 			attribution: "Stadsbyggnadskontoret, Malmö",
			// 			inputCrs: "EPSG:3008",
			// 			reverseAxis: false,
			// 			reverseAxisBbox: true,
			// 			selectable: true,
			// 			popup: '${primarykey}',
			// 			uniqueKey: "primarykey"
			// 			// ,
			// 			// style: {
			// 			// 	color: '#00F',
			// 			// 	fillOpacity: 0.3
			// 			// }
			// 	}
			// },
			{
				init: "L.TileLayer.WMS",
				url: "http://localhost/geoserver/wms",
				options: {
					displayName: "Fastigheter",
					layerId: "fastigheter",
					category: ["Bo, bygga & miljö"],
					layers: "malmows:SMA_SUM_FASTYTA_P",
					legendBig: "http://kartor.malmo.se/arcgis/services/atlaskarta_3857_wms/MapServer/WMSServer?SERVICE=WMS&REQUEST=GetMap&VERSION=1.1.1&LAYERS=0&STYLES=&FORMAT=png&TRANSPARENT=false&HEIGHT=256&WIDTH=256&SRS=EPSG%3A3857&BBOX=1408887.3053523686,7474929.870063956,1428455.184593374,7494497.749304956",
					selectable: true,
					selectOptions: {
						// url: "http://xyz.malmo.se:8081/geoserver/wms",
						srs: "EPSG:3008",
						reverseAxis: false,
						reverseAxisBbox: true,
						// layers: "malmows:SMA_SUM_FASTYTA_P",
						info_format: "application/json"
					},
					popup: '<div>${fastighet}</div><p>Some other irrelevant information</p><p>This is the pkey: ${primarykey}.</p>',
						// '<div>En liten text kommer här som handlar om den här platsen. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>',
					format: 'image/png',
					zIndex: 150,
					attribution: "@ Malmö stad",
					transparent: true
				}
			},
			{
				init: "L.TileLayer.WMS",
				url: "http://localhost/geoserver/wms",
				options: {
					displayName: "Kvarter",
					layerId: "kvarter",
					category: ["Bo, bygga & miljö"],
					layers: "malmows:SMA_SUM_KVARTER_P",
					selectable: true,
					selectOptions: {
						// url: "http://xyz.malmo.se:8081/geoserver/wms",
						srs: "EPSG:3008",
						reverseAxis: false,
						reverseAxisBbox: true,
						// layers: "malmows:SMA_SUM_KVARTER_P",
						info_format: "application/json"
					},
					popup: '<div>${name}</div><p>Nothing else</p>',
					format: 'image/png',
					zIndex: 150,
					attribution: "@ Malmö stad",
					transparent: true
				}
			},

			{
				init: "L.TileLayer.WMS",
				url: "http://localhost/geoserver/wms",
				options: {
					displayName: "Planerade förskolor",
					layerId: "planfsk",
					category: ["Förskola & utbildning"],
					layers: "malmows:POI_PLANERADE_FORSKOLOR_PT",
					selectable: true,
					popup: '<div>${namn}</div>',
					format: 'image/png',
					zIndex: 350,
					attribution: "@ Malmö stad",
					transparent: true
				}
			},
			
			
			{
				init: "L.TileLayer.WMS",
				url: "http://localhost/geoserver/wms",
				options: {
					displayName: "Kommunala förskolor",
					layerId: "kommunal_forskola",
					category: ["Förskola & utbildning"],
					layers: "malmows:V_POI_EXTENS_FORSKOLOR_KOMMUNAL_PT",
					selectable: true,
					popup: '<div>${namn}</div>\
							<br /><a href="${url}">Mer information</a>\
							<br /><a href="http://kartor.malmo.se/urbex/index.htm?p=true&xy=${easting};${northing}">Visa snedbild</a>',		
					format: 'image/png',
					zIndex: 350,
					attribution: "@ Malmö stad",
					transparent: true
				}
			},
			{
				init: "L.TileLayer.WMS",
				url: "http://localhost/geoserver/wms",
				options: {
					displayName: "Icke kommunala förskolor",
					layerId: "ickekom_forskola",
					category: ["Förskola & utbildning"],
					layers: "malmows:V_POI_EXTENS_FORSKOLOR_PRIVAT_PT",
					selectable: true,
					popup: '<div>${namn}</div>\
							<br /><a href="${url}">Mer information</a>\
							<br /><a href="http://kartor.malmo.se/urbex/index.htm?p=true&xy=${easting};${northing}">Visa snedbild</a>',		
					format: 'image/png',
					zIndex: 350,
					attribution: "@ Malmö stad",
					transparent: true
				}
			},
			{
				init: "L.TileLayer.WMS",
				url: "http://localhost/geoserver/wms",
				options: {
					displayName: "Grundskola",
					layerId: "grundskola",
					category: ["Förskola & utbildning"],
					layers: "malmows:POI_EXTENS_XLS_GRUNDSKOLA_PT",
					selectable: true,
					popup: '<div>${objektnamn}</div>\
							<br /><a href="${url}">Mer information</a>\
							<br /><a href="http://kartor.malmo.se/urbex/index.htm?p=true&xy=${easting};${northing}">Visa snedbild</a>',		
					format: 'image/png',
					zIndex: 350,
					attribution: "@ Malmö stad",
					transparent: true
				}
			},
			{
				init: "L.TileLayer.WMS",
				url: "http://localhost/geoserver/wms",
				options: {
					displayName: "Gymnasieskola",
					layerId: "gymnasieskola",
					category: ["Förskola & utbildning"],
					layers: "malmows:POI_SKOLOR_GYMNASIESKOLA_PT",
					selectable: true,
					popup: '<div>${objektnamn}</div>\
							<br /><a href="http://kartor.malmo.se/urbex/index.htm?p=true&xy=${easting};${northing}">Visa snedbild</a>',		
					format: 'image/png',
					zIndex: 350,
					attribution: "@ Malmö stad",
					transparent: true
				}
			},
			{
				init: "L.TileLayer.WMS",
				url: "http://localhost/geoserver/wms",
				options: {
					displayName: "Högskola & universitet",
					layerId: "hogskola_universitet",
					category: ["Förskola & utbildning"],
					layers: "malmows:POI_SKOLOR_HOGSKOLOR_UNIVERISITET_PT",
					selectable: true,
					popup: '<div>${objektnamn}</div>\
							<br /><a href="${url}">Mer information</a>\
							<br /><a href="http://kartor.malmo.se/urbex/index.htm?p=true&xy=${easting};${northing}">Visa snedbild</a>',		
					format: 'image/png',
					zIndex: 350,
					attribution: "@ Malmö stad",
					transparent: true
				}
			},

			{
				init: "L.TileLayer.WMS",
				url: "http://localhost/geoserver/wms",
				options: {
					displayName: "Övriga skolor",
					layerId: "ovrigskola",
					category: ["Förskola & utbildning"],
					layers: "malmows:POI_SKOLOR_OVR_PT",
					selectable: true,
					popup: '<div>${objektnamn}</div>\
							<br /><a href="${url}">Mer information</a>\
							<br /><a href="http://kartor.malmo.se/urbex/index.htm?p=true&xy=${easting};${northing}">Visa snedbild</a>',		
					format: 'image/png',
					zIndex: 350,
					attribution: "@ Malmö stad",
					transparent: true
				}
			},

			{
				init: "L.TileLayer.WMS",
				url: "http://localhost/geoserver/wms",
				options: {
					displayName: "Bibliotek",
					layerId: "bibliotek",
					category: ["Kultur & Fritid", "Biblioteken"],
					layers: "malmows:POI_KULTUR_BIBLIOTEK_PT",
					selectable: true,
					popup: '<div>${objektnamn}</div>\
							<br /><a href="http://kartor.malmo.se/urbex/index.htm?p=true&xy=${easting};${northing}">Visa snedbild</a>',							
					format: 'image/png',
					zIndex: 350,
					attribution: "@ Malmö stad",
					transparent: true
				}
			},

			{
				init: "L.TileLayer.WMS",
				url: "http://localhost/geoserver/wms",
				options: {
					displayName: "Temalekplatser",
					layerId: "temalekplatser",
					category: ["Kultur & Fritid", "Barn & unga"],
					layers: "malmows:POI_FRITID_TEMALEKPLATS_PT",
					selectable: true,
					popup: '<div>${objektnamn}</div>',
					format: 'image/png',
					zIndex: 350,
					attribution: "@ Malmö stad",
					transparent: true
				}
			},
			{
				init: "L.TileLayer.WMS",
				url: "http://localhost/geoserver/wms",
				options: {
					displayName: "Lekplatser",
					layerId: "lekplatser",
					category: ["Kultur & Fritid", "Barn & unga"],
					layers: "malmows:POI_FRITID_LEKPLATS_PT",
					selectable: true,
					popup: '<div>${objektnamn}</div>',
					zIndex: 350,
					format: 'image/png',
					attribution: "@ Malmö stad",
					transparent: true
				}
			},

			{
				init: "L.TileLayer.WMS",
				url: "http://localhost/geoserver/wms",
				options: {
					displayName: "Museum & konst",
					layerId: "museum",
					category: ["Kultur & Fritid", "Kultur & nöje"],
					layers: "malmows:POI_KULTUR_MUSEUM_OCH_KONST_PT",
					selectable: true,
					popup: '<div>${objektnamn}</div>',
					zIndex: 350,
					format: 'image/png',
					attribution: "@ Malmö stad",
					transparent: true
				}
			},

			{
				init: "L.TileLayer.WMS",
				url: "http://localhost/geoserver/wms",
				options: {
					displayName: "Teater & musik",
					layerId: "teater_och_musik",
					category: ["Kultur & Fritid", "Kultur & nöje"],
					layers: "malmows:POI_KULTUR_TEATER_OCH_MUSIK_PT",
					selectable: true,
					popup: '<div>${objektnamn}</div>',
					zIndex: 350,
					format: 'image/png',
					attribution: "@ Malmö stad",
					transparent: true
				}
			},
			
			
			{
				init: "L.TileLayer.WMS",
				url: "http://localhost/geoserver/wms",
				options: {
					displayName: "Förvaltningar & myndigheter",
					layerId: "forvaltning",
					category: ["Kommun & Politik", "Förvaltningar & myndigheter"],
					layers: "malmows:POI_KOMMUN_POLITIK_FORVALTNING_MYNDIGHET_PT",
					selectable: true,
					popup: '<div>${objektnamn}</div>',
					format: 'image/png',
					zIndex: 350,
					attribution: "@ Malmö stad",
					transparent: true
				}
			},

			{
				init: "L.TileLayer.WMS",
				url: "http://localhost/geoserver/wms",
				options: {
					displayName: "Medborgarkontor & medborgarservice",
					layerId: "medborgarkontor",
					category: ["Kommun & Politik", "Förvaltningar & myndigheter"],
					layers: "malmows:POI_KOMMUN_POLITIK_MEDBORGARKONTOR_PT",
					selectable: true,
					popup: '<div>${objektnamn}</div>',
					format: 'image/png',
					zIndex: 350,
					attribution: "@ Malmö stad",
					transparent: true
				}
			},

			{
				init: "L.NonTiledLayer.WMS",
				url: "http://localhost/geoserver/wms",
				options: {
					displayName: "Delområden",
					layerId: "delomraden",
					category: ["Kommun & Politik", "Stadsområden & delområden"],
					layers: "malmows:SMA_DELOMRADE_P",
					selectable: true,
					popup: '<div>${delomr}</div>',
					format: 'image/png',
					zIndex: 150,
					attribution: "@ Malmö stad",
					transparent: true
				}
			},
			
			{
				init: "L.NonTiledLayer.WMS",
				url: "http://localhost/geoserver/wms",
				options: {
					displayName: "Stadsområden",
					layerId: "stadsomraden",
					category: ["Kommun & Politik", "Stadsområden & delområden"],
					layers: "malmows:SMA_STADSOMRADEN_P",
					selectable: true,
					popup: '<div>${sdf_namn}</div>',
					format: 'image/png',
					zIndex: 150,
					//tileSize: 1000,
					attribution: "@ Malmö stad",
					transparent: true
				}
			},

						{
				init: "L.TileLayer.WMS",
				url: "http://localhost/geoserver/wms",
				options: {
					displayName: "Stadsdel (tom juni 2013)",
					layerId: "stadsdel_tom",
					category: ["Kommun & Politik", "Stadsområden & delområden"],
					layers: "malmows:SMA_STADSDEL_P",
					selectable: true,
					popup: '<div>${sdfname}</div>',
					format: 'image/png',
					zIndex: 150,
					attribution: "@ Malmö stad",
					singleTile : true,
					transparent: true
				}
			},

			
			{
				init: "L.TileLayer.WMS",
				url: "http://localhost/geoserver/wms",
				options: {
					displayName: "Antagna planer",
					layerId: "antagna_planer",
					category: ["Stadsplanering & trafik"],
					layers: "malmows:SMA_PLANOMR_P",
					selectable: true,
					popup: '<div>${plan}</div>\
							<br /><a href="${url}">Mer information</a>\
							<br /><a href="${url_snedbi}">Visa snedbild</a>',
					format: 'image/png',
					zIndex: 150,
					attribution: "@ Malmö stad",
					transparent: true
				}
			},
			{
				init: "L.TileLayer.WMS",
				url: "http://localhost/geoserver/wms",
				options: {
					displayName: "Pågående planer",
					layerId: "pagaende_planer",
					category: ["Stadsplanering & trafik"],
					layers: "malmows:SMA_PAGAENDE_PLANER_P",
					selectable: true,
					popup: '<div>${plan}</div>\
							<br /><a href="${url}">Mer information</a>\
							<br /><a href="${url_snedbi}">Visa snedbild</a>',
					format: 'image/png',
					zIndex: 150,
					attribution: "@ Malmö stad",
					transparent: true
				}
			},
			{
				init: "L.TileLayer.WMS",
				url: "http://localhost/geoserver/wms",
				options: {
					displayName: "Offentliga toaletter",
					layerId: "offentligatoaletter",
					category: ["Stadsplanering & trafik"],
					layers: "malmows:YYY",
					selectable: true,
					popup: '<div>${ttt}</div>',
					format: 'image/png',
					zIndex: 150,
					attribution: "@ Malmö stad",
					transparent: true
				}
			},


			{
				init: "L.TileLayer.WMS",
				url: "http://localhost/geoserver/wms",
				options: {
					displayName: "Cykelvägar",
					layerId: "cykelvagar",
					category: ["Stadsplanering & trafik"],
					layers: "malmows:GK_CYKELVAG_L",
					selectable: true,
					selectOptions: {
						info_format: "application/json",
						srs: "EPSG:3008",
						reverseAxis: false,
						reverseAxisBbox: true
					},
					popup: "*",
					format: 'image/png',
					zIndex: 250,
					attribution: "@ Malmö stad",
					transparent: true
				}
			},
			{
				init: "L.TileLayer.WMS",
				url: "http://193.17.67.229/geos/wms",
				options: {
					displayName: "Hållplatser",
					layerId: "hallplats",
					category: ["Stadsplanering & trafik"],
					layers: "common:poi_hallplatser1330_malmo",
					selectable: true,
					popup: '<div>${caption}</div>',
					format: 'image/png',
					zIndex: 150,
					attribution: "@ Malmö stad",
					transparent: true
				}
			}
		],
			
		bl: [
		{
				init: "L.TileLayer.WMS",
				url: "http://kartor.malmo.se/arcgis/services/atlaskarta_3857_wms/MapServer/WMSServer",
				options: {
					layerId: "stadskartan",
					displayName: "Stadskarta",
					layers: '0',
					minZoom: 10,
					maxZoom: 21,
					format: 'png',
					legend: null,
					transparent: false,
					opacity: 1.0,
					attribution: "Â© MalmÃ¶ Stadsbyggnadskontor",
					zIndex: 50
				}
		},
		{
				init: "L.esri.DynamicMapLayer",
				url: "http://kartor.malmo.se/arcgis/rest/services/malmokarta_3857/MapServer",
				options: {
					//reuseTiles: true,  ANVÄND EJ
					transparent: true,
					format: "png",
					singleTile: true,
					layerId: "stadskartan_dynmaplayer",
					displayName: "Malmö stadskarta Dyn",
					legend: null,
					opacity: 1.0,
					minZoom: 10,
					maxZoom: 18,
					attribution: '© Malmö Stadsbyggnadskontor',
					zIndex: 50
				}
		},					
		{
				init: "L.TileLayer.WMS",
				url: "http://kartor.malmo.se/geoserver/malmows/wms?",
				options: {
					layerId: "malmo_ortofoto",
					displayName: "Fotokarta 2013",
					layers: 'malmows:malmo_orto_2013',
					legend: null,
					minZoom: 10,
					maxZoom: 21,
					format: 'image/png',
					transparent: true,
					opacity: 0.9,
					attribution: "© Malmö Stadsbyggnadskontor",
					zIndex: 50
				}
		}
		],
		
		plugins: [
					{
						init: "L.Control.Scale",
						options: {
							imperial: false
						}
					},
					{
						init: "L.Control.Editor",
						options: {
							useProxy: false
						}
					},

					// {
					// 	init: "L.Control.DrawSmap",
					// 	options: {
					// 		useProxy: false
					// 	}
					// },
					// {
					// 	init: "L.Control.MalmoHeader",
					// 	options: {}
					// },
					{
						init: "L.Control.LayerSwitcher",
						options: {
							toggleSubLayersOnClick: false
						}
					},
					{
						init: "L.Control.Zoombar",
						options: {}
					},
					{
						init: "L.Control.Geolocate",
						options: {}
					},
					{
						init: "L.Control.SelectWMS",
						options: {
							buffer: 5,
							useProxy: false
						}
					},
					{
						init: "L.Control.SelectVector",
						options: {
							buffer: 5
						}
					},
					// {
					// 	init: "L.Control.SharePosition",
					// 	options: {}
					// },
					{
						init: "L.Control.Search",
						options: {
							gui: true,
							whitespace: "%20",
							wsOrgProj: "EPSG:3008",
							useProxy: true,
							wsAcUrl: "http://kartor.malmo.se/WS/search-1.0/autocomplete.ashx", // autocomplete
							wsLocateUrl: "http://kartor.malmo.se/WS/search-1.0/sokexakt.ashx" // locate
						}
					},
					{
						init: "L.Control.MeasureDraw",
						options: {
							position: "topright"
						}
					},
					{
						init: "L.Control.ShareLink",
						options: {
							position: "topright"
						}
					},
					{
						init : "L.Control.RedirectClick",
						option: {
							url: "http://xyz.malmo.se/urbex/index.htm?p=true&xy=${x};${y}",
							position: "topright"
						}
					},
					{
						init : "L.Control.RedirectClick",		
						option: {
							url: "http://xyz.malmo.se/urbex/index.htm?p=true&xy=${x};${y}",
							position: "topright"
						}
					},
					// {
					// 	init : "L.Control.RedirectClick",		
					// 	option: {
					// 		url: "http://xyz.malmo.se/urbex/index.htm?p=true&xy=${x};${y}",
					// 		position: "topright"
					// 	}
					// },
					// {
 				// 		init: "L.Control.Info",
 				// 		options: {
 				// 			position: "topright"
 				// 		}
 				//  	},
					{
 						init: "L.Control.Print",
 						options: {
 							printUrl: "http://localhost/print-servlet/leaflet_print/", // http://161.52.15.157/geoserver/pdf
 							position: "topright"
 						}
 				 	},
 				//  	{
					// 	init: "L.Control.Opacity",
					// 	options: {
					//  		savePrefBox: true,
					//  		position: "topright"
					// 	}
					// },
					{
						init: "L.Control.ToolHandler",
						options: {}
					}
					// {
					//  	init: "L.Control.Add2HomeScreen",
					//  	options: {}
					// },
					//{
					//	 init: "L.Control.FullScreen",
					//		options: {position: 'topright'}
					//}
		]
};

var selectOptions = {
		info_format: "application/json",
		srs: "EPSG:3008",
		reverseAxis: false,
		reverseAxisBbox: true
};

var ol = config.ol;
for (var i=0,len=ol.length; i<len; i++) {
	t = ol[i];
	if (t.options && t.options.selectable && (t.init === "L.NonTiledLayer.WMS" || t.init === "L.TileLayer.WMS")) {
		t.options.selectOptions = $.extend({}, selectOptions, t.options.selectOptions || {});
	}
}
